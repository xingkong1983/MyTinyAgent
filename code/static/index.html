<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <title>My Tiny AI Agent</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/static/css/lib/minireset.min.css">
  <link rel="stylesheet" href="/static/css/lib/github.min.css">
  <link rel="stylesheet" href="/static/css/lib/github-markdown.css">
  <link rel="stylesheet" href="/static/css/layout/main.css">
  <link rel="stylesheet" href="/static/css/ui/ui-form.css">
  <link rel="stylesheet" href="/static/css/ui/ui-scrollbar.css">
  <link rel="stylesheet" href="/static/css/ui/ui-tabs.css">
  <link rel="stylesheet" href="/static/css/ui/ui-select.css">

</head>

<body>
  <header>
    <div class="logo">
      <div class="logo-icon">T</div>
      <div class="logo-title">我的小助理</div>
    </div>
    <div class="user">
      <img class="user-avatar" src="/static/img/avatar.png">萨摩多罗
    </div>
    </div>
  </header>
  <main>
    <div class="sidebar-left">
      <div class="sidebar-svg-wrapper">
        <img src="/static/img/svg/sidebar.svg"></img>
      </div>
      <button class="sidebar-button">
        <img src="/static/img/svg/new.svg"></img>
        新建对话
      </button>
      <div class="sidebar-logs">
        <div class="logs-tag">今天</div>
        <div class="log-item truncate">苹果笔记本支持32B配置</div>
        <div class="log-item truncate">Win11微信多开BAT脚本</div>
      </div>
    </div>
    <div id="app">
      <h1 style=" margin-block-start: 0px;margin-block-end: 0;display: flex;align-items: center;">
        聊天客户端（流式）
      </h1>
      <div id="chat" style="flex: 1;overflow: auto; margin:16px 0;"></div>
      <textarea id="prompt" placeholder="说点什么…"></textarea>
      <div class="model-select">
        <div class="select-container" id="select2">
          <!-- <div class="select-header">
                <span class="select-placeholder">搜索并选择模型</span>
              <span class="select-arrow"><i class="fas fa-chevron-down"></i></span>
          </div> -->
          <div class="select-header">
            <span class="select-value">K1.5 响应迅速，视觉理解</span>
            <span class="select-arrow"><i class="fas fa-chevron-down"></i></span>
          </div>
          <div class="select-options">
            <div class="select-search">
              <input type="text" placeholder="搜索模型...">
            </div>
            <div class="select-option" data-value="k2">
              <i class="fas fa-crown"></i>
              <div>
                <div>K2 新模型 <span class="option-tag">推荐</span></div>
                <div class="option-description">旗舰模型，默认推荐</div>
              </div>
            </div>
            <div class="select-option" data-value="k1.5">
              <i class="fas fa-bolt"></i>
              <div>
                <div>K1.5</div>
                <div class="option-description">响应迅速，视觉理解</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:8px">
        <button id="sendBtn">发送</button>
        <button id="stopBtn" style="background:#d73a49;color:#fff">停止</button>
        <span id="loading" style="display:none;font-size:14px;color:#656d76">思考中…</span>
      </div>
    </div>

    <div class="sidebar-right">
      <div class="tabs-container">
        <div id="myTabs" class="tabs">
          <div class="tabs-header">
            <button class="tab-btn active">首页</button>
            <button class="tab-btn">产品介绍</button>
          </div>
          <div class="tabs-content">
            <div class="tab-pane active">
              <div class="example-content">
                <h3>欢迎使用Tabs组件</h3>
                <p>这是一个功能强大的标签页组件，可以轻松集成到您的项目中。</p>
                <p>它具有平滑的动画效果和响应式设计，在移动设备上也能完美工作。</p>
              </div>
            </div>
            <div class="tab-pane">
              <div class="example-content">
                <h3>产品介绍</h3>
                <p>我们的产品旨在解决现代Web开发中的常见问题，提供优雅的UI组件。</p>
                <p>主要特性：</p>
                <ul>
                  <li>易于使用和定制</li>
                  <li>高性能和轻量级</li>
                  <li>兼容所有现代浏览器</li>
                </ul>
              </div>
            </div>

          </div>
        </div>
      </div>
  </main>
  <footer>
    版本 V 1.00
  </footer>
  <script src="/static/js/lib/marked.min.js"></script>
  <script src="/static/js/lib/highlight.min.js"></script>
  <script src="/static/js/lib/echarts.min.js"></script>
  <script src="/static/js/lib/split.min.js"></script>
  <script src="/static/js/ui/tabs.js"></script>
  <script src="/static/js/ui/select.js"></script>
  <script src="/static/js/llm/ChatBox.js"></script>
  <script src="/static/js/llm/llmClient.js"></script>

  <script>
    const tabs = new Tabs('#myTabs', {
      initialTab: 0,          // 初始显示的标签页索引
      animation: true,  // 启用动画
      showCloseButton: false, // 禁用标签页关闭按钮       
      onChange: (index) => {  // 切换回调
        console.log(`切换到标签页: ${index}`);
      }
    });

    // 初始化示例
    document.addEventListener('DOMContentLoaded', function () {
      // 搜索下拉框
      const select2 = new Select('#select2', {
        search: true,
        onChange: (value, text) => {
          console.log('选择2:', value, text);
        }
      });

    });
  </script>
  <script>
    const apiBase = 'http://127.0.0.1:5800/fakeLLM/v1/chat/completions';
    const model = 'mywen3:0.1b';
    client = new LLMClient({
      apiBase: apiBase,
      model: model, token: 'sk-test', botId: 'bot-007'
    })
    new ChatBox({
      client,
      idList: {
        chat: 'chat',
        input: 'prompt',
        tips: 'loading',
        sendBtn: 'sendBtn',
        stopBtn: 'stopBtn'
      }
    });

  </script>
  <script>
    // 初始化 split.js 实例
    document.addEventListener('DOMContentLoaded', function () {
      Split(['.sidebar-left', '#app', '.sidebar-right'], {
        sizes: [14, 60, 26],
        minSize: [160, 0, 160], // 分别为左侧边栏、主内容区、右侧边栏设置最小宽度
        gutterSize: 4,
        elementStyle: function (dimension, size, gutterSize) {
          return {
            'flex-basis': 'calc(' + size + '% - ' + gutterSize + 'px)'
          }
        },
        gutterStyle: function (dimension, gutterSize) {
          return {
            'flex-basis': gutterSize + 'px'
          }
        }
      });

      // 添加点击事件监听器
      const sidebarSvg = document.querySelector('.sidebar-svg');
      const sidebarSvgCollapse = document.querySelector('.sidebar-svg-collapse');
      const sidebarLeft = document.querySelector('.sidebar-left');

      sidebarSvg.addEventListener('click', function () {
        sidebarLeft.classList.toggle('collapsed');
        if (sidebarLeft.classList.contains('collapsed')) {
          sidebarSvgCollapse.style.display = 'inline-block';
        } else {
          sidebarSvgCollapse.style.display = 'none';
        }
      });

      sidebarSvgCollapse.addEventListener('click', function () {
        sidebarLeft.classList.toggle('collapsed');
        if (sidebarLeft.classList.contains('collapsed')) {
          sidebarSvgCollapse.style.display = 'inline-block';
        } else {
          sidebarSvgCollapse.style.display = 'none';
        }
      });
    });
  </script>
</body>

</html>